/* This file was auto generated by mvme-{{mvme_version}} on {{export_date}},
 * with data from run {{run_id}}.
 * DO NOT MODFIY!
 * This file will be overwritten on the next export.
 */
#ifndef __MVME_EXPORT_GUARD_{{header_guard}}__
#define __MVME_EXPORT_GUARD_{{header_guard}}__

#include <cstddef>
#include <istream>
#include <string>
#include <utility>

struct {{struct_name}}
{
    /* Exported data arrays. */
{{#array_info}}
    double {{variable_name}}[{{dimension}}];
{{/array_info}}

    /* Lower and upper limits for each parameter of each array. */
    struct Limits
    {
{{#array_info}}
        static const double {{variable_name}}[{{dimension}}][2];
{{/array_info}}
    };

    /* The number of data arrays. */
    static const size_t ArrayCount = {{array_count}};

    /* The dimension of each exported array. */
    static const uint16_t ArrayDimensions[ArrayCount];

    /* The name of each exported array. */
    static const std::string ArrayNames[ArrayCount];

    /* The unit label for each array. */
    static const std::string UnitLabels[ArrayCount];

    /* Accessors using array and param indices. These allow non-static access
       to static data. */

    /* Same as the static ArrayCount member. */
    size_t getArrayCount() const;

    /* Returns a pointer to the exported array with the given index.
       Returns nullptr if the index is out of range. */
    const double *getArray(size_t index) const;
    double *getArray(size_t index);

    /* Equivalent to getArray(arrayIndex)[paramIndex]. Returns a quiet NaN if
     * any of the indexes is out of range. */
    double getValue(size_t arrayIndex, size_t paramIndex);

    /* Returns the size of the exported array with the given index.
       Returns 0 if the index is out of range. */
    size_t getArrayDimension(size_t index) const;

    /* Returns the name of the input array as defined in the analysis. */
    std::string getArrayName(size_t index) const;

    /* Returns the unit label of the array with the given index.
       Returns an empty string if the index is out of range. */
    std::string getUnitLabel(size_t index) const;

    /* Returns the limits for the given array and parameter indices.
       A std::pair of NaN values is returned if either the array index or the
       parameter index are out of range. */
    std::pair<double, double> getLimits(size_t arrayIndex, size_t paramIndex) const;

} __attribute__((packed)); /* No padding wanted. */

std::istream &read(std::istream &in, {{struct_name}} &event);

#endif /* __MVME_EXPORT_GUARD_{{header_guard}}__ */
{{!
vim:ft=cpp
}}
