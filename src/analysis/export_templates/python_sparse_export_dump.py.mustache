#!/usr/bin/env python3
# This file was auto generated by mvme-{{mvme_version}} on {{export_date}}.

import sys
from {{event_import}} import {{struct_name}}

if __name__ == "__main__":
    if len(sys.argv) < 2:
        print("Usage: " + sys.argv[0] + " <input_file>");
        sys.exit(1);

    inputFilename = sys.argv[1]
    print("Reading input from: " + inputFilename)

    inFile = None

    if inputFilename[-3:] == ".gz":
        import gzip
        inFile = gzip.GzipFile(inputFilename, 'rb')
    else:
        inFile = open(inputFilename, 'rb')

    eventCount = 0

    while True:
        event = {{struct_name}}.read(inFile)
        if not event: break

        eventCount += 1

        for ai in range(event.ArrayCount):
            print("Array #%u: " % ai, ": ", end='')
            sparseArray = event.getArray(ai)
            for paramIndex, value in sparseArray:
                print("[%u] = %lf, " % (paramIndex, value), end='')
            print()
        print()

    print("Read %u events from %s" % (eventCount, inputFilename))

{{!
vim:ft=python
}}
